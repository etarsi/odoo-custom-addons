<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="account_payment_group_form_view_inherit" model="ir.ui.view">
        <field name="name">account.payment.group.form.view.inherit</field>
        <field name="model">account.payment.group</field>
        <field name="inherit_id" ref="account_payment_group.view_account_payment_group_form"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='payment_date']" position="before">
                <field name="archived" invisible="1"/>
            </xpath>

            <!--  
                <xpath expr="//sheet" position="inside">
                    <div attrs="{'invisible': [('paid_date_venc_html','=',False)]}">
                        <field name="paid_date_venc_html" widget="html" nolabel="1"/>
                    </div>
                </xpath>
            -->
                            
            <!-- ARCHIVADO -->
            <xpath expr="//div[@name='button_box']" position="after">
                <widget name="web_ribbon" title="Archivado" bg_color="bg-danger"
                    attrs="{'invisible': [('archived','!=', True)]}"/>
            </xpath>

            <!-- MENSAJE DE PAGO FUERA DE FECHA 
                <xpath expr="//field[@name='payment_date']" position="before">
                    <div class="text-danger"
                        style="font-weight:700; font-size:16px; margin:8px 0; white-space:pre-line;"
                        attrs="{'invisible': ['|', ('state','!=','draft'), ('is_paid_date_venc_text','=', False)]}">
                        <field name="paid_date_venc_text" readonly="1" nolabel="1"/>
                    </div>
                    <field name="is_paid_date_venc_text" invisible="1"/>
                </xpath>
            -->
        </field>
    </record>

    <record id="account_payment_group_tree_view_inherit" model="ir.ui.view">
        <field name="name">account.payment.group.tree.view.inherit</field>
        <field name="model">account.payment.group</field>
        <field name="inherit_id" ref="account_payment_group.view_account_payment_group_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="inside">
                <field name="archived" invisible="1"/>
            </xpath>
        </field>
    </record>

    <record id="account_payment_group_search_view_inherit" model="ir.ui.view">
        <field name="name">account.payment.group.search.view.inherit</field>
        <field name="model">account.payment.group</field>
        <field name="inherit_id" ref="account_payment_group.view_account_payment_group_search"/>
        <field name="arch" type="xml">
            <xpath expr="//search" position="inside">
                <filter name="archived" string="Archivados" domain="[('archived','=',True)]"/>
                <filter name="not_cancelled_archived" string="No Cancelados y Archivados" domain="[('state','!=','cancelled'),('archived','=',False)]" help="Muestra los grupos de pago que no estÃ¡n cancelados ni archivados."/>
            </xpath>
        </field>
    </record>

    <record id="account_payment_group.action_account_payments_group" model="ir.actions.act_window">
        <field name="context">{'default_partner_type': 'customer', 'search_default_not_cancelled_archived': 1}</field>
    </record>

    <!-- vista del account payment group proveedor -->
    <record id="account_payment_group_search_view_proveedor" model="ir.ui.view">
        <field name="name">account.payment.group.search.view.inherit</field>
        <field name="model">account.payment.group</field>
        <field name="arch" type="xml">
            <search string="Buscar Registros">
                <filter string="Borrador" name="state_draft" domain="[('state', '=', 'draft')]"/>
                <filter string="Publicado" name="state_posted" domain="[('state', '=', 'posted')]"/>
                <separator/>
                <field name="partner_id" string="Proveedor"/>
                <field name="display_name" filter_domain="['|', ('name','ilike',self), ('communication','ilike',self)]" string="OP"/>
                <separator/>
                <filter string="Empresa Activa" name="active_company" domain="[('company_id', '=', allowed_company_ids[0])]"/>
                <separator/>
                <separator/>
                <filter string="No cancelado y archivado" name="not_cancelled_archived" domain="[('state', '!=', 'cancelled'),('archived','=',False)]"/>
                <separator/>
                <filter name="payment_methods" domain="[]" context="{'groupby': 'payment_methods'}"/>
            </search>
        </field>
    </record>
    
    <record id="account_payment_group.action_account_payments_group_payable" model="ir.actions.act_window">
        <field name="context">{'default_partner_type': 'supplier', 'search_default_not_cancelled_archived': 1}</field>
        <field name="search_view_id" ref="account_enhancement.account_payment_group_search_view_proveedor"/>
    </record>

</odoo>