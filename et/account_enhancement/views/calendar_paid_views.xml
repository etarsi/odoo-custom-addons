<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Calendario de facturas por pagar (usa date_paid) -->
    <record id="view_move_calendar_to_pay" model="ir.ui.view">
        <field name="name">account.move.calendar.to.pay</field>
        <field name="model">account.move</field>
        <field name="arch" type="xml">
            <calendar string="Pagos programados"
                    date_start="date_paid"
                    color="calendar_color_state"
                    quick_add="false"
                    create="false"
                    delete="false"
                    mode="month">
                <!-- Campos visibles en el popup del evento -->
                <field name="name"/>
                <field name="partner_id"/>
                <field name="payment_state"/>
                <field name="amount_residual"/>
                <field name="amount_total_day"/>
                <field name="invoice_date_due"/>
                <field name="journal_id"/>
            </calendar>
        </field>
    </record>

    <!-- AcciÃ³n con modos calendar/tree/form -->
    <record id="action_account_move_calendar_to_pay" model="ir.actions.act_window">
        <field name="name">Calendario de Pagos</field>
        <field name="res_model">account.move</field>
        <field name="view_mode">calendar,tree</field>
        <field name="view_id" ref="view_move_calendar_to_pay"/>
        <!-- SOLO facturas de proveedor, posteadas y con saldo -->
        <field name="domain">[
            ('date_paid','!=',False),
            ('move_type','=','in_invoice'),
            ('state','=','posted')
        ]</field>
        <field name="search_view_id" ref="account.view_account_invoice_filter"/>
        <field name="context">
            {
                'calendar_view': 1,
                'search_default_open': 1,
                'default_move_type': 'in_invoice',
            }
        </field>
    </record>
</odoo>
