<!-- security/hr_enhancement_rules.xml -->
<odoo>
    <!-- Empleado: ver SOLO sus asistencias -->
    <record id="rule_attendance_self" model="ir.rule">
        <field name="name">Asistencias propias</field>
        <field name="model_id" ref="hr_attendance.model_hr_attendance"/>
        <field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('hr_enhancement.group_hr_self_service'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- Supervisor: ver TODAS las asistencias -->
    <record id="rule_attendance_all_supervisor" model="ir.rule">
        <field name="name">Asistencias todas (Supervisor)</field>
        <field name="model_id" ref="hr_attendance.model_hr_attendance"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('hr_enhancement.group_hr_supervisor'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- Admin: todas y con permisos completos -->
    <record id="rule_attendance_all_admin" model="ir.rule">
        <field name="name">Asistencias todas (Admin)</field>
        <field name="model_id" ref="hr_attendance.model_hr_attendance"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('hr_enhancement.group_hr_administrador'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <!-- Empleado: solo su ficha -->
    <record id="rule_employee_self" model="ir.rule">
        <field name="name">Empleado: ver propio</field>
        <field name="model_id" ref="hr.model_hr_employee"/>
        <field name="domain_force">[('user_id','=',user.id)]</field>
        <field name="groups" eval="[(4, ref('hr_enhancement.group_hr_self_service'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- Supervisor: ver todos (solo lectura) -->
    <record id="rule_employee_all_supervisor" model="ir.rule">
        <field name="name">Empleado: ver todos (Supervisor)</field>
        <field name="model_id" ref="hr.model_hr_employee"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('hr_enhancement.group_hr_supervisor'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- Admin: todo -->
    <record id="rule_employee_all_admin" model="ir.rule">
        <field name="name">Empleado: todo (Admin)</field>
        <field name="model_id" ref="hr.model_hr_employee"/>
        <field name="domain_force">[(1,'=',1)]</field>
        <field name="groups" eval="[(4, ref('hr_enhancement.group_hr_administrador'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>
</odoo>
